<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Free YouTube Video Downloader - Download in MP4, MP3, HD | Bharat Bhushan</title>
    <meta name="description" content="The fastest and easiest way to download YouTube videos for free with Bharat Bhushan Tools. Convert and save videos in MP4, MP3, HD, 4K, and more formats. No registration required.">
    <meta name="keywords" content="youtube downloader, download youtube videos, youtube to mp4, youtube to mp3, free youtube downloader, online video downloader, bharat bhushan tools">
    <link rel="canonical" href="https://www.bharatbhushan.com.np/youtube-video-downloader.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph (OG) Tags for Social Sharing -->
    <meta property="og:title" content="Free YouTube Video Downloader by Bharat Bhushan">
    <meta property="og:description" content="Easily download and convert YouTube videos to MP4, MP3, and other formats in high quality. Fast, free, and no software installation needed.">
    <meta property="og:image" content="https://i.imgur.com/d7uaSWD.png">
    <meta property="og:url" content="https://www.bharatbhushan.com.np/youtube-video-downloader.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Bharat Bhushan">

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free YouTube Video Downloader by Bharat Bhushan">
    <meta name="twitter:description" content="The best online tool to download YouTube videos quickly and for free. Supports HD, 4K, MP4, and MP3 conversion.">
    <meta name="twitter:image" content="https://i.imgur.com/d7uaSWD.png">

    <!-- Favicon -->
    <link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="icon" href="/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    
    <!-- Stylesheets and Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for social icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8FAFC; }
        .btn-primary { background-color: #EF4444; color: white; transition: background-color 0.3s; }
        .btn-primary:hover:not(:disabled) { background-color: #DC2626; }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
        .input-with-icon { position: relative; }
        .input-with-icon .icon { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #9CA3AF; }
        .input-with-icon input { padding-left: 3rem; }
        .faq-item summary::-webkit-details-marker { display: none; }
        .footer-bg { background-color: #0d1429; }
        .subscribe-button { background: linear-gradient(to right, #8B5CF6, #6366F1); }
    </style>
    
    <!-- JSON-LD Structured Data for FAQ -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "Is this YouTube downloader completely free?",
        "acceptedAnswer": { "@type": "Answer", "text": "Yes, our YouTube downloader is 100% free to use. There are no hidden charges, subscription fees, or premium plans. You can download as many videos as you want without any cost." }
      },{
        "@type": "Question",
        "name": "Is it legal to download YouTube videos?",
        "acceptedAnswer": { "@type": "Answer", "text": "Downloading videos from YouTube for personal use is generally acceptable. However, you should not use copyrighted content for commercial purposes without permission. We recommend only downloading non-copyrighted videos or videos you have permission to use." }
      },{
        "@type": "Question",
        "name": "What video and audio formats are supported?",
        "acceptedAnswer": { "@type": "Answer", "text": "Our tool supports a wide range of formats, including MP4, WebM, and MKV for video, and MP3, M4A, and OGG for audio. You can also choose from various quality options, from 360p up to 4K, depending on the original video." }
      }]
    }
    </script>
</head>
<body class="text-slate-800">

    <!-- Header -->
    <header class="bg-white py-6">
        <div class="container mx-auto px-6 text-center">
            <a href="index.html" class="flex items-center justify-center space-x-3">
                <img src="https://i.imgur.com/d7uaSWD.png" alt="Bharat Bhushan Logo" class="h-10 w-auto">
                <span class="text-2xl font-bold text-slate-900">Bharat Bhushan</span>
            </a>
            <nav class="mt-4 flex items-center justify-center space-x-8">
                <a href="index.html#all-categories" class="flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-indigo-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                    Tools
                </a>
                <a href="about.html" class="flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-indigo-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg>
                    About
                </a>
                <a href="contact.html" class="flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-indigo-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M2.003 5.884L10 2.006l7.997 3.878A2 2 0 0119 7.616V16a2 2 0 01-2 2H3a2 2 0 01-2-2V7.616a2 2 0 011.003-1.732zM10 13a3 3 0 100-6 3 3 0 000 6z" /></svg>
                    Contact
                </a>
            </nav>
        </div>
    </header>

<main>
    <!-- Hero Section -->
    <section id="home" class="bg-red-50 py-16 md:py-24">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">Free YouTube Video Downloader</h1>
                <p class="text-xl text-gray-600 mb-8">Fast, free, and simple way to download videos from YouTube. Convert to MP4 or MP3 in your preferred quality.</p>
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <div class="mb-4">
                        <div class="input-with-icon">
                            <i class="icon fas fa-link"></i>
                            <input type="text" id="video-url" class="w-full px-4 py-3 text-gray-900 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" placeholder="Paste YouTube video link here">
                        </div>
                    </div>
                    <button id="download-btn" class="w-full btn-primary py-3 font-semibold rounded-lg text-lg flex items-center justify-center">
                        Download
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Preview Section (Initially Hidden) -->
    <section id="video-preview" class="py-12 hidden">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto bg-white p-6 rounded-xl shadow-lg">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="w-full md:w-2/5">
                        <img id="video-thumbnail" src="https://placehold.co/400x225/ef4444/white?text=Video" alt="Video Thumbnail Preview" class="w-full h-auto rounded-lg object-cover object-top">
                    </div>
                    <div class="w-full md:w-3/5">
                        <h2 id="video-title" class="text-xl font-semibold text-gray-900 mb-2">Video Title Will Appear Here</h2>
                        <p id="video-channel" class="text-gray-600 mb-4">Channel Name</p>
                        <div id="download-buttons-container" class="flex flex-wrap gap-2">
                            <!-- Download buttons will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Notification Popups -->
    <div id="notification-container" class="fixed top-20 right-4 z-50 space-y-2"></div>

    <!-- Features Section -->
    <section id="features" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">The Best Online YouTube Downloader</h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">Experience the best features designed to make your video downloading experience seamless and efficient.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-red-100 text-red-600 mx-auto"><i class="fas fa-bolt fa-2x"></i></div><h3 class="mt-6 text-lg font-semibold text-slate-900">Fast Downloads</h3><p class="mt-2 text-base text-slate-600">Our powerful servers ensure your videos are processed and ready for download in seconds.</p></div>
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-red-100 text-red-600 mx-auto"><i class="fas fa-photo-video fa-2x"></i></div><h3 class="mt-6 text-lg font-semibold text-slate-900">Multiple Formats</h3><p class="mt-2 text-base text-slate-600">Choose from a wide range of video (MP4, WebM) and audio (MP3, M4A) formats.</p></div>
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-red-100 text-red-600 mx-auto"><i class="fas fa-star fa-2x"></i></div><h3 class="mt-6 text-lg font-semibold text-slate-900">High Quality</h3><p class="mt-2 text-base text-slate-600">Download videos in the highest quality available, including 720p, 1080p, and even 4K.</p></div>
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-red-100 text-red-600 mx-auto"><i class="fas fa-lock fa-2x"></i></div><h3 class="mt-6 text-lg font-semibold text-slate-900">Secure & Private</h3><p class="mt-2 text-base text-slate-600">Your downloads are secure, and we never store your video links or personal data.</p></div>
            </div>
        </div>
    </section>

    <!-- How It Works Section -->
    <section id="how-it-works" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">How to Download a YouTube Video</h2>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">Download any YouTube video in just a few simple steps with our online tool.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 text-indigo-600 mx-auto text-2xl font-bold">1</div><h3 class="mt-6 text-lg font-semibold text-slate-900">Copy the URL</h3><p class="mt-2 text-base text-slate-600">Go to YouTube, find the video you want to download, and copy its URL from the address bar.</p></div>
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 text-indigo-600 mx-auto text-2xl font-bold">2</div><h3 class="mt-6 text-lg font-semibold text-slate-900">Paste in the Field</h3><p class="mt-2 text-base text-slate-600">Paste the video URL into the input field at the top of this page and click "Download".</p></div>
                <div class="text-center p-6"><div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 text-indigo-600 mx-auto text-2xl font-bold">3</div><h3 class="mt-6 text-lg font-semibold text-slate-900">Choose & Download</h3><p class="mt-2 text-base text-slate-600">Select your preferred format and quality from the available options and click to start the download.</p></div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Frequently Asked Questions</h2>
            </div>
            <div class="max-w-3xl mx-auto space-y-2" x-data="{ open: 1 }">
                <details class="p-4 rounded-lg border" :open="open === 1" @click.prevent="open = (open === 1 ? null : 1)">
                    <summary class="flex justify-between items-center font-semibold text-slate-900 cursor-pointer">Is this YouTube downloader completely free?<i class="fas fa-chevron-down transition-transform" :class="{'rotate-180': open === 1}"></i></summary>
                    <p class="mt-4 text-slate-600">Yes, our YouTube downloader is 100% free to use. There are no hidden charges, subscription fees, or premium plans. You can download as many videos as you want without any cost.</p>
                </details>
                <details class="p-4 rounded-lg border" :open="open === 2" @click.prevent="open = (open === 2 ? null : 2)">
                    <summary class="flex justify-between items-center font-semibold text-slate-900 cursor-pointer">Is it legal to download YouTube videos?<i class="fas fa-chevron-down transition-transform" :class="{'rotate-180': open === 2}"></i></summary>
                    <p class="mt-4 text-slate-600">Downloading videos from YouTube for personal use is generally acceptable. However, you should not use copyrighted content for commercial purposes without permission. We recommend only downloading non-copyrighted videos or videos you have permission to use.</p>
                </details>
                <details class="p-4 rounded-lg border" :open="open === 3" @click.prevent="open = (open === 3 ? null : 3)">
                    <summary class="flex justify-between items-center font-semibold text-slate-900 cursor-pointer">What video and audio formats are supported?<i class="fas fa-chevron-down transition-transform" :class="{'rotate-180': open === 3}"></i></summary>
                    <p class="mt-4 text-slate-600">Our tool supports a wide range of formats, including MP4, WebM, and MKV for video, and MP3, M4A, and OGG for audio. You can also choose from various quality options, from 360p up to 4K, depending on the original video.</p>
                </details>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<footer class="footer-bg text-slate-400">
    <div class="container mx-auto px-6 pt-16 pb-8">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
            <!-- Left Side -->
            <div class="md:col-span-6 lg:col-span-6 space-y-8">
                <div>
                    <a href="index.html" class="flex items-center space-x-3">
                        <img src="https://i.imgur.com/d7uaSWD.png" alt="Bharat Bhushan Logo" class="h-10 w-auto">
                        <span class="text-xl font-bold text-white">Bharat Bhushan</span>
                    </a>
                    <p class="mt-4 text-sm text-slate-400 max-w-xs">
                        Your one-stop destination for free online tools to boost productivity.
                    </p>
                    <div class="mt-6 flex space-x-4">
                        <a href="#" class="text-slate-400 hover:text-white transition-colors" aria-label="Twitter"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-slate-400 hover:text-white transition-colors" aria-label="Facebook"><i class="fab fa-facebook-f fa-lg"></i></a>
                        <a href="#" class="text-slate-400 hover:text-white transition-colors" aria-label="LinkedIn"><i class="fab fa-linkedin-in fa-lg"></i></a>
                    </div>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-white tracking-wider">Company</h3>
                    <ul class="mt-4 space-y-3">
                        <li><a href="about.html" class="text-sm hover:text-white transition-colors">About Us</a></li>
                        <li><a href="contact.html" class="text-sm hover:text-white transition-colors">Contact</a></li>
                        <li><a href="blog.html" class="text-sm hover:text-white transition-colors">Blog</a></li>
                    </ul>
                </div>
            </div>

            <!-- Right Side -->
            <div class="md:col-span-6 lg:col-span-6 grid grid-cols-2 gap-8">
                <div>
                    <h3 class="text-sm font-semibold text-white tracking-wider">Tools</h3>
                    <ul class="mt-4 space-y-3">
                        <li><a href="ai-tools.html" class="text-sm hover:text-white transition-colors">AI Tools</a></li>
                        <li><a href="image-tools.html" class="text-sm hover:text-white transition-colors">Image Tools</a></li>
                        <li><a href="pdf-tools.html" class="text-sm hover:text-white transition-colors">PDF Tools</a></li>
                        <li><a href="youtube-tools.html" class="text-sm hover:text-white transition-colors">YouTube Tools</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-white tracking-wider">Legal</h3>
                    <ul class="mt-4 space-y-3">
                        <li><a href="privacy.html" class="text-sm hover:text-white transition-colors">Privacy Policy</a></li>
                        <li><a href="terms.html" class="text-sm hover:text-white transition-colors">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Newsletter and Copyright Section -->
        <div class="mt-12 pt-8 border-t border-slate-800">
            <div class="text-center">
                 <h3 class="text-sm font-semibold text-white">Stay Updated</h3>
                 <p class="mt-2 text-sm">Get the latest tools and updates delivered to your inbox.</p>
                 <form class="mt-4 max-w-md mx-auto" onsubmit="handleSubscription(event)">
                     <div class="flex flex-col sm:flex-row gap-2">
                        <input id="email-input" type="email" placeholder="Enter your email" required class="w-full px-4 py-2 bg-slate-800 border border-slate-700 rounded-md text-sm text-white placeholder-slate-500 focus:ring-2 focus:ring-indigo-500 focus:outline-none transition">
                        <button type="submit" class="subscribe-button text-white text-sm font-semibold px-5 py-2 rounded-md hover:opacity-90 transition-opacity shrink-0">Subscribe</button>
                     </div>
                 </form>
            </div>
            <div class="mt-8 pt-8 border-t border-slate-800 text-center">
                <p class="text-sm text-slate-500">&copy; 2025 Bharat Bhushan. All rights reserved.</p>
            </div>
        </div>
    </footer>

<script id="api-script">
document.addEventListener('DOMContentLoaded', function() {
    const RAPIDAPI_KEY = 'bc73a476e6msh10240cb95786540p14f225jsn6eef43bdb1d6';
    const RAPIDAPI_HOST = 'youtube-media-downloader.p.rapidapi.com';
    const downloadBtn = document.getElementById('download-btn');
    const videoUrlInput = document.getElementById('video-url');
    const videoPreview = document.getElementById('video-preview');
    const videoThumbnail = document.getElementById('video-thumbnail');
    const videoTitle = document.getElementById('video-title');
    const videoChannel = document.getElementById('video-channel');
    const buttonsContainer = document.getElementById('download-buttons-container');
    const notificationContainer = document.getElementById('notification-container');

    function extractVideoId(url) {
        if (!url) return null;
        const regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
        const match = url.match(regex);
        return match ? match[1] : null;
    }

    function showNotification(message, type = 'success') {
        const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
        const iconSvg = type === 'success' ? 
            '<svg class="w-6 h-6 mr-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>' : 
            '<svg class="w-6 h-6 mr-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>';
        
        const notification = document.createElement('div');
        notification.className = `flex items-center text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 ${bgColor}`;
        notification.innerHTML = `${iconSvg}<span>${message}</span>`;
        
        notificationContainer.appendChild(notification);
        setTimeout(() => notification.classList.remove('translate-x-full'), 10);
        setTimeout(() => {
            notification.classList.add('translate-x-full');
            notification.addEventListener('transitionend', () => notification.remove());
        }, 4000);
    }

    function downloadFile(url, filename) {
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        showNotification(`Downloading "${filename}"...`, 'success');
    }

    function populatePreview(data) {
        videoThumbnail.src = data.thumbnails[data.thumbnails.length - 1].url;
        videoTitle.textContent = data.title;
        videoChannel.textContent = data.channelName;
        buttonsContainer.innerHTML = '';
        
        const createButton = (item, type) => {
            const isVideo = type === 'video';
            const btn = document.createElement('button');
            const quality = item.qualityLabel || (isVideo ? 'Video' : 'Audio');
            const iconSvg = isVideo ? 
                '<svg class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" /></svg>' : 
                '<svg class="w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z" /></svg>';
            const bgColor = isVideo ? 'bg-red-500 text-white hover:bg-red-600' : 'bg-gray-200 text-gray-800 hover:bg-gray-300';

            btn.className = `flex items-center px-3 py-2 rounded-md font-medium transition-colors text-sm ${bgColor}`;
            btn.innerHTML = `${iconSvg} ${quality} (${item.extension})`;
            
            const filename = `${data.title} - ${quality}.${item.extension}`.replace(/[<>:"/\\|?*]+/g, '_');
            btn.addEventListener('click', () => downloadFile(item.url, filename));
            return btn;
        };

        if (data.videos && data.videos.items) {
            data.videos.items.forEach(video => buttonsContainer.appendChild(createButton(video, 'video')));
        }
        if (data.audios && data.audios.items) {
            data.audios.items.forEach(audio => buttonsContainer.appendChild(createButton(audio, 'audio')));
        }
        
        videoPreview.classList.remove('hidden');
        videoPreview.scrollIntoView({ behavior: 'smooth' });
    }

    downloadBtn.addEventListener('click', async function() {
        const url = videoUrlInput.value.trim();
        const videoId = extractVideoId(url);

        if (!videoId) {
            showNotification('Please enter a valid YouTube video URL.', 'error');
            return;
        }

        downloadBtn.innerHTML = '<svg class="animate-spin h-5 w-5 mx-auto" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';
        downloadBtn.disabled = true;

        const apiUrl = `https://youtube-media-downloader.p.rapidapi.com/v2/video/details?videoId=${videoId}&urlAccess=normal&videos=auto&audios=auto`;
        const options = {
            method: 'GET',
            headers: {
                'x-rapidapi-key': RAPIDAPI_KEY,
                'x-rapidapi-host': RAPIDAPI_HOST
            }
        };

        try {
            const response = await fetch(apiUrl, options);
            const data = await response.json();
            if (!response.ok) {
                throw new Error(data.message || `API request failed with status ${response.status}`);
            }
            populatePreview(data);
        } catch (error) {
            console.error('API Error:', error);
            showNotification(error.message, 'error');
            videoPreview.classList.add('hidden');
        } finally {
            downloadBtn.innerHTML = 'Download';
            downloadBtn.disabled = false;
        }
    });
});
</script>
</body>
</html>
